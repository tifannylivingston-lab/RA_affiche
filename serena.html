<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Serena Williams â€“ RA</title>

  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>

  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: black;
    }
  </style>
</head>

<body>

<a-scene
  mindar-image="imageTargetSrc: serena.mind;"
  vr-mode-ui="enabled:false"
  device-orientation-permission-ui="enabled:true">

  <a-camera look-controls="false"></a-camera>

  <a-assets>
    <video
      id="video-serena"
      src="serena.mp4"
      preload="auto"
      playsinline
      crossorigin="anonymous">
    </video>
  </a-assets>

  <!-- CIBLE RA -->
  <a-entity
    id="target"
    mindar-image-target="targetIndex:0">

    <!-- VIDEO -->
    <a-video
      id="videoPlane"
      src="#video-serena"
      width="1.6"
      height="0.9"
      position="0 0.35 0"
      visible="false"
      animation__in="property: scale; from: 0.3 0.3 0.3; to: 1 1 1; dur: 900; easing: easeOutElastic">
    </a-video>

    <!-- PALMARÃˆS -->
    <a-entity id="palmares" visible="false">

      <a-text
        value="ðŸ† Serena Williams"
        position="0 0.45 0"
        align="center"
        width="3"
        color="#FFD700"
        animation__title="property: scale; from: 0.2 0.2 0.2; to: 1 1 1; dur: 900; easing: easeOutElastic">
      </a-text>

      <a-text
        value="ðŸŽ¾ 23 titres du Grand Chelem"
        position="0 0.15 0"
        align="center"
        width="2.8"
        color="#FFFFFF"
        animation="property: opacity; from: 0; to: 1; delay: 400; dur: 600">
      </a-text>

      <a-text
        value="ðŸ¥‡ 4 mÃ©dailles dâ€™or olympiques"
        position="0 -0.1 0"
        align="center"
        width="2.8"
        color="#FFFFFF"
        animation="property: opacity; from: 0; to: 1; delay: 800; dur: 600">
      </a-text>

      <a-text
        value="ðŸ‘‘ 319 semaines nÂ°1 mondiale"
        position="0 -0.35 0"
        align="center"
        width="2.8"
        color="#FFFFFF"
        animation="property: opacity; from: 0; to: 1; delay: 1200; dur: 600">
      </a-text>

    </a-entity>

  </a-entity>
</a-scene>

<script>
  const video = document.querySelector('#video-serena');
  const videoPlane = document.querySelector('#videoPlane');
  const palmares = document.querySelector('#palmares');
  const target = document.querySelector('#target');

  // Quand l'image est dÃ©tectÃ©e
  target.addEventListener('targetFound', () => {
    palmares.setAttribute('visible', 'false');
    videoPlane.setAttribute('visible', 'true');
    video.currentTime = 0;
    video.play();
  });

  // Quand l'image est perdue
  target.addEventListener('targetLost', () => {
    video.pause();
  });

  // Fin de vidÃ©o â†’ palmarÃ¨s
  video.addEventListener('ended', () => {
    videoPlane.setAttribute('visible', 'false');
    palmares.setAttribute('visible', 'true');
  });
</script>

</body>
</html>
