<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Serena Williams â€“ RA</title>

  <!-- A-FRAME -->
  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>

  <!-- MINDAR -->
  <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>

  <style>
    body { margin: 0; overflow: hidden; font-family: Arial, sans-serif; }

    /* PAGE D'ATTENTE */
    #waiting{
      position:absolute;
      width:100%;
      height:100%;
      background:linear-gradient(135deg,#7b1fa2,#ec407a);
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      color:white;
      z-index:2;
    }

    #waiting h2{
      text-align:center;
      font-size:1.8em;
      text-shadow:2px 2px 6px #000;
      margin-bottom:15px;
    }

    #waiting p{
      text-align:center;
      font-size:1.1em;
    }

    /* BOUTON DEMARRER RA */
    #startAR{
      padding:12px 25px;
      border-radius:12px;
      font-size:1.2em;
      cursor:pointer;
      background-color:#FFD700;
      color:#000;
      font-weight:bold;
      border:none;
      box-shadow:0 5px 15px rgba(0,0,0,0.5);
      transition:all 0.3s;
      margin-top:20px;
    }

    #startAR:hover{
      background-color:#FFB600;
      transform: scale(1.05);
    }

    /* ICÃ”NES FLOTTANTES */
    .floating{
      position:absolute;
      width:80px;
      height:80px;
      background-size:cover;
      background-position:center;
      animation:float 3s ease-in-out infinite;
    }

    @keyframes float{
      0%{transform:translateY(0);}
      50%{transform:translateY(-10px);}
      100%{transform:translateY(0);}
    }

    /* CADRE SCAN */
    .scan-box{
      position:absolute;
      top:30%;
      left:50%;
      transform:translateX(-50%);
      width:200px;
      height:300px;
      border:3px dashed #FFD700;
      border-radius:10px;
      display:flex;
      justify-content:center;
      align-items:center;
      color:#FFD700;
      font-weight:bold;
      text-align:center;
    }

  </style>
</head>

<body>

<!-- PAGE D'ATTENTE -->
<div id="waiting">
  <h2>ðŸ“¸ Scanne lâ€™image pour dÃ©couvrir Serena Williams !</h2>
  <p>Patiente un instant et observe les icÃ´nes autour ðŸ‘€</p>

  <!-- ICÃ”NES FLOTTANTES -->
  <div class="floating" style="top:15%; left:10%; background-image:url('ballon_foot.png');"></div>
  <div class="floating" style="top:40%; right:15%; background-image:url('raquette_tennis.png');"></div>
  <div class="floating" style="bottom:20%; left:30%; background-image:url('halteres.png');"></div>
  <div class="floating" style="bottom:25%; right:25%; background-image:url('gymnaste.png');"></div>

  <!-- CADRE SCAN -->
  <div class="scan-box">
    Place ton marqueur ici
  </div>

  <!-- BOUTON DEMARRER RA -->
  <button id="startAR">DÃ©marrer RA</button>
</div>

<!-- SCÃˆNE RA -->
<a-scene
  mindar-image="imageTargetSrc: serena.mind;"
  color-space="sRGB"
  renderer="colorManagement: true;"
  vr-mode-ui="enabled: false"
  device-orientation-permission-ui="enabled: true"
  arjs="trackingMethod: best;"
  embedded>

  <!-- CAMÃ‰RA -->
  <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

  <!-- CIBLE RA -->
  <a-entity mindar-image-target="targetIndex: 0" id="ra-target">

    <!-- VIDEO -->
    <a-video
      src="#video-serena"
      width="1.2"
      height="0.7"
      position="0 0.4 0"
      autoplay
      loop>
    </a-video>

    <!-- TEXTE PALMARÃˆS -->
    <a-text
      value="ðŸŽ¾ Serena Williams\n\nðŸ† 23 Grands Chelems\nðŸ¥‡ 4 Or Olympiques\nðŸ‘‘ 319 semaines nÂ°1"
      position="0 -0.4 0"
      align="center"
      width="2"
      color="#ffffff">
    </a-text>

    <!-- MESSAGE INSPIRANT -->
    <a-text
      value="Â« Le talent nâ€™a pas de genre. Â»"
      position="0 -0.75 0"
      align="center"
      width="2"
      color="#FFD700">
    </a-text>

  </a-entity>

  <!-- ASSETS -->
  <a-assets>
    <video id="video-serena" src="serena.mp4" preload="auto"></video>
  </a-assets>

</a-scene>

<script>
  const target = document.querySelector("#ra-target");
  const waitingDiv = document.querySelector("#waiting");
  const startBtn = document.querySelector("#startAR");
  const scene = document.querySelector("a-scene");

  // DEMARRER RA AU CLIC
  startBtn.addEventListener("click", () => {
    scene.components['mindar-image'].start();
    alert("RA dÃ©marrÃ©e ! Place ton marqueur devant la camÃ©ra.");
  });

  // CACHER LA PAGE D'ATTENTE QUAND LE MARQUEUR EST DETECTÃ‰
  target.addEventListener("targetFound", () => {
    waitingDiv.style.display = "none";
  });

  // REAFFICHER LA PAGE D'ATTENTE QUAND LE MARQUEUR EST PERDU
  target.addEventListener("targetLost", () => {
    waitingDiv.style.display = "flex";
  });
</script>

</body>
</html>
