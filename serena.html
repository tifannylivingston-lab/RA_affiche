<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Serena Williams â€“ RA</title>

  <!-- A-Frame -->
  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>

  <!-- MindAR -->
  <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>

  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: black;
    }
  </style>
</head>

<body>

<a-scene
  mindar-image="imageTargetSrc: serena.mind;"
  vr-mode-ui="enabled:false"
  device-orientation-permission-ui="enabled:true">

  <!-- CamÃ©ra -->
  <a-camera look-controls="false"></a-camera>

  <!-- Assets -->
  <a-assets>
    <video
      id="video-serena"
      src="serena.mp4"
      preload="auto"
      playsinline
      crossorigin="anonymous">
    </video>
  </a-assets>

  <!-- CIBLE RA -->
  <a-entity mindar-image-target="targetIndex:0">

    <!-- VIDEO (ratio 16:9, animÃ©e) -->
    <a-video
      id="videoPlane"
      src="#video-serena"
      width="1.6"
      height="0.9"
      position="0 0.35 0"
      visible="false"
      animation__in="property: scale; from: 0.3 0.3 0.3; to: 1 1 1; dur: 900; easing: easeOutElastic">
    </a-video>

    <!-- BOUTON LECTURE -->
    <a-plane
      id="playBtn"
      position="0 -0.3 0"
      width="0.9"
      height="0.28"
      color="#FFD700"
      animation="property: scale; dir: alternate; dur: 800; loop: true; to: 1.05 1.05 1.05">
    </a-plane>

    <a-text
      value="â–¶ Lancer la vidÃ©o"
      position="0 -0.3 0.01"
      align="center"
      width="2.5"
      color="#000">
    </a-text>

    <!-- PALMARÃˆS (aprÃ¨s la vidÃ©o) -->
    <a-entity id="palmares" visible="false" position="0 0 0">

      <a-text
        value="ðŸ† Serena Williams"
        position="0 0.45 0"
        align="center"
        width="3"
        color="#FFD700"
        animation__title="property: scale; from: 0.2 0.2 0.2; to: 1 1 1; dur: 900; easing: easeOutElastic">
      </a-text>

      <a-text
        value="ðŸŽ¾ 23 titres du Grand Chelem"
        position="0 0.15 0"
        align="center"
        width="2.8"
        color="#FFFFFF"
        animation="property: opacity; from: 0; to: 1; delay: 400; dur: 600">
      </a-text>

      <a-text
        value="ðŸ¥‡ 4 mÃ©dailles dâ€™or olympiques"
        position="0 -0.1 0"
        align="center"
        width="2.8"
        color="#FFFFFF"
        animation="property: opacity; from: 0; to: 1; delay: 800; dur: 600">
      </a-text>

      <a-text
        value="ðŸ‘‘ 319 semaines nÂ°1 mondiale"
        position="0 -0.35 0"
        align="center"
        width="2.8"
        color="#FFFFFF"
        animation="property: opacity; from: 0; to: 1; delay: 1200; dur: 600">
      </a-text>

    </a-entity>

  </a-entity>
</a-scene>

<script>
  const video = document.querySelector('#video-serena');
  const videoPlane = document.querySelector('#videoPlane');
  const playBtn = document.querySelector('#playBtn');
  const palmares = document.querySelector('#palmares');

  playBtn.addEventListener('click', () => {
    playBtn.setAttribute('visible', 'false');
    videoPlane.setAttribute('visible', 'true');
    video.currentTime = 0;
    video.play();
  });

  video.addEventListener('ended', () => {
    videoPlane.setAttribute('visible', 'false');
    palmares.setAttribute('visible', 'true');
  });
</script>

</body>
</html>
