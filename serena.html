<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Serena Williams â€“ RA</title>

  <!-- A-FRAME -->
  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>

  <!-- MINDAR -->
  <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>

  <style>
    body { margin: 0; overflow: hidden; }
  </style>
</head>

<body>

<a-scene
  mindar-image="imageTargetSrc: serena.mind;"
  vr-mode-ui="enabled: false"
  device-orientation-permission-ui="enabled: true">

  <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

  <!-- ASSETS -->
  <a-assets>
    <video id="video-serena"
           src="serena.mp4"
           preload="auto"
           playsinline
           crossorigin="anonymous">
    </video>
  </a-assets>

  <!-- CIBLE -->
  <a-entity mindar-image-target="targetIndex: 0" id="target">

    <!-- VIDÃ‰O (ratio respectÃ©) -->
    <a-video
      id="videoPlane"
      src="#video-serena"
      width="1.2"
      height="0.675"
      position="0 0.3 0"
      visible="true">
    </a-video>

    <!-- PALMARÃˆS (cachÃ© au dÃ©part) -->
    <a-entity id="palmares" visible="false">

      <a-text
        value="ðŸŽ¾ Serena Williams"
        position="0 0.3 0"
        align="center"
        width="2"
        color="#FFD700">
      </a-text>

      <a-text
        value="ðŸ† 23 Grands Chelems\nðŸ¥‡ 4 Or Olympiques\nðŸ‘‘ 319 semaines nÂ°1"
        position="0 0 0"
        align="center"
        width="2"
        color="#ffffff">
      </a-text>

      <a-text
        value="Â« Le talent nâ€™a pas de genre Â»"
        position="0 -0.3 0"
        align="center"
        width="2"
        color="#FFD700">
      </a-text>

    </a-entity>

  </a-entity>

</a-scene>

<script>
  const video = document.querySelector('#video-serena');
  const videoPlane = document.querySelector('#videoPlane');
  const palmares = document.querySelector('#palmares');
  const target = document.querySelector('#target');

  // Quand la cible est dÃ©tectÃ©e
  target.addEventListener('targetFound', () => {
    video.currentTime = 0;
    video.play();

    // animation ludique
    videoPlane.setAttribute('animation', {
      property: 'scale',
      from: '0.5 0.5 0.5',
      to: '1 1 1',
      dur: 900,
      easing: 'easeOutElastic'
    });
  });

  // Quand la vidÃ©o se termine â†’ afficher le palmarÃ¨s
  video.addEventListener('ended', () => {
    videoPlane.setAttribute('visible', 'false');
    palmares.setAttribute('visible', 'true');

    palmares.setAttribute('animation', {
      property: 'scale',
      from: '0.5 0.5 0.5',
      to: '1 1 1',
      dur: 800,
      easing: 'easeOutBack'
    });
  });

  // Si on perd la cible
  target.addEventListener('targetLost', () => {
    video.pause();
  });
</script>

</body>
</html>
